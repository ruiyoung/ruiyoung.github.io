--- 
layout:     post
title:      MySQL
subtitle:   数据类型
date:       2020-03-12
author:     Ruiyoung
header-img: img/MYSQL_bg.png
catalog: true
tags:
    - MySQL
---

### 前言  

 > 数据库MySQL针对存储数据属性格式的不同，定义了不同的数据类型。  

#### 数值类型  

##### 整数类型  

```{.javaScript}
109 = 1 × 2⁶ + 1 × 2⁵ + 0 × 2⁴ + 1 × 2³ + 1 × 2² + 0 × 2¹ + 1 × 2⁰
```

这个数可以被表示为：1101101(二进制)。又因为计算机中8个比特位代表一个字节，平时都是用若干个字节来表示一个整数，假如用1个字节表示109的话，那效果就是这样：01101101（二进制），假如用两个字节表示十进制数109的话，那效果就是这样：0000000001101101（二进制）。  
使用的字节数越多，意味着能表示的数值范围就越大，但是也就越耗费存储空间。
需要有一个比特位表示正负号。但是如果表示无符号数的话，也就是只表示非负数的话，就不需要表示正负号，这是有符号数和无符号数的区别。

![](/img/mysql_type_int.png)

##### 浮点数类型  

```{.javaScript}
9.875 = 8 + 1 + 0.5 + 0.25 + 0.125 = 1 × 2³ + 1 × 2⁰ + 1 × 2⁻¹ + 1 × 2⁻² + 1 × 2⁻³
```

十进制小数9.875转换成二进制小数的话就是：1001.111。为了在计算机里存储这种二进制小数，我们统一把它们表示成a × 2ⁿ的科学计数法的形式，其中1≤|a|＜2，比如1001.111可以被表示成1.001111 × 2³，我们把小数点之后的001111称为尾数，把2³中的3称为指数，然后只需要在计算机中的比特位中表示出尾数和指数就行了。另外，小数也有正负之分，我们还需要单独的部分来表示小数的正负号。  

- 符号部分，占用1个比特位即可。  
- 指数部分，视具体浮点数格式而定。  
- 尾数部分，视具体浮点数格式而定。  

![](/img/mysql_type_float.png)

更多的小数是无法直接转换成二进制的，比如说0.3，它转换成的二进制小数就是一个无限小数，但是我们现在只能用4个字节或者8个字节来表示这个小数，所以只能进行一些舍入来近似的表示，所以我们说计算机的浮点数表示有时是不精确的。  

##### 定点数类型  

正因为用浮点数表示小数可能会有不精确的情况，在一些情况下我们必须保证小数是精确的，所以设计MySQL的大叔们提出一种称之为定点数的数据类型，它也是存储小数的一种方式：  

![](/img/mysql_type_decimal.png)

```{.javaScript}
FLOAT(M, D)
DOUBLE(M, D)
```

- M表示该小数最多需要的十进制有效数字个数。  

- D表示该小数的小数点后的十进制数字个数。  

![](/img/mysql_type_decimal_example.png)

在D相同的情况下，M越大，该类型的取值范围越大；在M相同的情况下，D越大，该类型的取值范围越小。当然，M和D的取值也不是无限大的，M的取值范围是1~ 255，D的取值范围是0~30，而且D的值必须不大于M。  

定点数是一种精确的小数，为了达到精确的目的我们就不能把它转换成二进制小数之后再存储(因为有很多十进制小数转为二进制小数后需要进行舍入操作，导致二进制小数表示的数值是不精确的)。其实转念一想，所谓的小数只是把两个十进制整数用小数点分割开来而已，我们只要把小数点左右的两个十进制整数给存储起来，那不就是精确的了么。比方说对于十进制小数2.38来说，我们可以把这个小数的小数点左右的两个整数，也就是2和38分别保存起来，那么不就相当于保存了一个精确的小数么

##### 无符号数值类型的表示  

对于数值类型，包括整数、浮点数和定点数，有些情况下我们只需要用到无符号数（就是非负数）。对于数值类型，包括整数、浮点数和定点数，有些情况下我们只需要用到无符号数（就是非负数）。MySQL给我们提供了一个表示无符号数值类型的方式，就是在原数值类型后加一个单词UNSIGNED：

```{.javaScript}
数值类型 UNSIGNED // 比如INT UNSIGNED就表示无符号整数，FLOAT UNSIGNED表示无符号浮点数，DECIMAL UNSIGNED表示无符号定点数。
```

##### 日期和时间类型  

![](/img/mysql_type_time.png)

##### 字符串类型  

![](/img/mysql_type_string.png)

M代表该数据类型最多能存储的字符数量，L代表我们实际向该类型的属性中存储的字符串在特定字符集下所占的字节数，W代表在该特定字符集下，编码一个字符最多需要的字节数  

###### CHAR(M)  

CHAR(M)中的M代表该类型最多可以存储的字符数量，注意，是字符数量，不是字节数量。其中M的取值范围是0~255。如果省略掉M的值，那它的默认值就是1，也就是说CHAR和CHAR(1)是一个意思。CHAR(0)是一种特别的类型，它只能存储空字符串''或者NULL值  
一旦你确定了CHAR(M)类型的M的值，如果M的值很大，而你实际存储的字符串占用字节数又很少，会造成存储空间的浪费。  

###### VARCHAR(M)  

VARCHAR(M)中的M也是代表该类型最多可以存储的字符数量，理论上的取值范围是1~65535。但是MySQL中还有一个规定，表中某一行包含的所有列中存储的数据大小总共不得超过65535个字节（注意是字节），也就是说VARCHAR(M)类型实际能够容纳的字符数量是小于65535的。

###### TEXT类型

存储大型的字符串的类型。它们也都是变长类型

- TINYTEXT最多可以存储2⁸-1个字节，所以内容占用的字节长度用1个字节就可以表示  
- EXT最多可以存储2¹⁶-1个字节，所以内容占用的字节长度用2个字节就可以表示  
- MEDIUMTEXT最多可以存储2²⁴-1个字节，所以内容占用的字节长度用3个字节就可以表示  
- LONGTEXT最多可以存储2³²-1个字节，所以内容占用的字节长度用4个字节就可以表示  

###### ENUM类型和SET类型  

```{.javaScript}
ENUM('str1', 'str2', 'str3' ⋯)
```

表示在给定的字符串列表里选择一个。比如我们的性别一列可以定义成ENUM('男', '女')类型  

有的时候某一列的值可以在给定的字符串列表中挑选多个，假设学生的基本信息加了一列兴趣属性，这个属性的值可以从给定的兴趣列表中挑选多个，那我们可以使用SET类型，它的格式如下：

```{.javaScript}
SET('str1', 'str2', 'str3' ⋯)
```

##### 二进制类型  

###### BIT类型(存储单个或者多个比特位)  

M的取值范围为1~64，而且M可以省略，它的默认值为1，也就是说BIT(1)和BIT的意思是一样的。

###### BINARY(M)与VARBINARY(M) (存放字节)  

BINARY(M)和VARBINARY(M)对应于我们前边提到的CHAR(M)和VARCHAR(M)，都是前者是固定长度的类型，后者是可变长度的类型，只不过BINARY(M)和VARBINARY(M)是用来存放字节的，其中的M代表该类型最多能存放的字节数量，而CHAR(M)和VARCHAR(M)是用来存储字符的，其中的M代表该类型最多能存放的字符数量。  

###### 其他的二进制类型  

TINYBLOB、BLOB、MEDIUMBLOB、LONGBLOB是针对数据量很大的二进制数据提出的，比如图片、音频、压缩文件啥的。它们很像TINYTEXT、TEXT、MEDIUMTEXT、LONGTEXT，不过各种BLOB类型是用来存储字节的，而各种TEXT类型是用来存储字符的而已。  

对于比较大的二进制数据，比方说图片、音频、压缩文件什么的，通常情况下都不直接存储到数据库管理系统中，而是将它们保存到文件系统中，然后在数据库中之存放一个文件路径即可。  
